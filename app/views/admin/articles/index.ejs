<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../../partials/head'); -%>
</head>

<body>
  <%- include('../../partials/navbar'); -%>

  <div class="container">

    <div class="row">
      <div class="col s12 m12 l12 left-align text-blue darken-4">
        <h3>Artigos</h3>
      </div>
      <div class="col s6 m3 l3 left-align ">
        <a class="waves-effect waves-light btn-flat blue darken-4"><i class="material-icons">plus</i>Novo Artigo</a>
      </div>
    </div>

    <!-- Tabela de Artigos -->
    <table class="highlight centered responsive-table">
      <thead>
        <tr>
          <th>Id</th>
          <th>Título</th>
          <th>Slug</th>
          <th>Categoria</th>
          <th>Ações</th>
        </tr>
      </thead>

      <tbody>
        <% articles.forEach(article => { %>
        <tr>
          <td><%= article.id %></td>
          <td><%= article.title %></td>
          <td><%= article.slug %></td>
          <td><%= article.category.title %></td>
          <td>
            <!-- btn: Remover -->
            <form method="POST" action="/articles/delete" style="display: inline;" onsubmit="confirmDelete(e, this)">
              <input name="id" value="<%= article.id %>" type="hidden">
              <a class="waves-effect waves-light btn-flat"><i class="material-icons">remove</i></a>
            </form>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <%- include('../../partials/script'); -%>
  <script>
    function confirmDelete(e, form) {
      e.preventDefault();
      const decision = confirm('Você deseja deletar este artigo?');
      if (decision) { form.submit(); }
    }
  </script>

</body>

</html>