<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../../partials/head'); -%>
</head>

<body>
  <%- include('../../partials/navbar'); -%>

  <div class="container">

    <div class="row">
      <div class="col s12 m12 l12 left-align text-blue darken-4">
        <h3>Categorias</h3>
      </div>      
    </div>

    <!-- Tabela de Categorias -->
    <table class="highlight centered responsive-table">
      <thead>
        <tr>
          <th>Id</th>
          <th>Título</th>
          <th>Slug</th>
          <th>Ações</th>
        </tr>
      </thead>

      <tbody>
        <% categories.forEach(category => { %>
        <tr>
          <td><%= category.id %></td>
          <td><%= category.title %></td>
          <td><%= category.slug %></td>
          <td>
            <!-- btn: Editar -->
            <a class="waves-effect waves-light btn-flat" href="/admin/categories/edit/<%= category.id %>"><i class="material-icons">edit</i></a>
            <!-- btn: Remover -->
            <form method="POST" action="/categories/delete" style="display: inline;" onsubmit="confirmDelete(e, this)">
              <input name="id" value="<%= category.id %>" type="hidden">
              <a class="waves-effect waves-light btn-flat"><i class="material-icons">remove</i></a>
            </form>
          </td>
        </tr>
        <% }) %>

      </tbody> 
    </table>
  </div>

  <%- include('../../partials/script'); -%>
  <script>
    function confirmDelete(e, form) {
      e.preventDefault('O formulário não foi enviado.');
      
      const decision = confirm('Você deseja deletar?');
      if (decision) { form.submit(); } 
    }
  </script>

</body>

</html>